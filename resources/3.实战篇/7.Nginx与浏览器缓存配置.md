# **7.Nginx与浏览器缓存配置**

**1.应用场景**

​     Q：  对于网站的图片,尤其是新闻站, 图片一旦发布, 改动的可能是非常小的.

​	       我们希望 能否在用户访问一次后, **图片缓存在用户的浏览器端**,且时间比较长的缓存.

​      A：   

​	**1）nginx的expires设置**

​	在location或if段里,来写.

​	格式      expires 30s;

   		   expires 30m;

​     		 expires 2h;

​     		 expires 30d;

(注意:服务器的日期要准确,如果服务器的日期落后于实际日期,可能导致缓存失效)

```
location ~ .*\.(jpg|png|gif|bmp)$ {
	 expires 30d;        
}
```

​	**2）返回304作为缓存手段**

​	原理： 

​		服务器响应文件内容为（etag标签+  last_modified_since ），

​		浏览器下次去请求时，头信息发送这两个标签，

​		服务器检测文件有没有发生变化： 

​		如无,直接头信息返回 etag,last_modified_since， 浏览器直接调用本地缓存

​	适用：

​		对于变化周期较短的,如静态html,js,css,比较适于用这个方式

​		